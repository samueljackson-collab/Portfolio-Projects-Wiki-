# Template: Technology Deep Dive
# Used when a new technology is detected across repos that doesn't have a deep dive yet
# =====================================================================================

name: "technology_deep_dive"
description: "Generates a TechnologyDeepDive entry for a newly detected technology"

system_prompt: |
  You are a senior software engineer writing educational technology deep-dives
  for a portfolio wiki. Each deep-dive should explain WHY a technology matters,
  HOW it works at a conceptual level, and provide practical guidance.

  IMPORTANT RULES:
  - Title should be "Why <Technology>?" format
  - Explanation should be 2-3 sentences, accessible but technically precise
  - Key concepts: 3-5 concepts, mix of simple string descriptions and objects
    with code examples
  - Code examples must be syntactically correct and idiomatic
  - Benefits: 4-6 bullet points
  - Best practices: 3-5 actionable items
  - Anti-patterns: 3-5 common mistakes
  - Learning resources: 3 real, verifiable URLs with descriptive link text (all URLs are validated and non-2xx links are flagged)
  - Match the tone of the existing deep dives (provided as examples)

user_prompt: |
  Create a technology deep-dive for a technology found in the portfolio repos.

  ## Technology
  - **Name:** {{technology_name}}
  - **Used In Projects:** {{projects_using}}
  - **Context:** {{usage_context}}

  ## Existing Deep Dives (for style reference)
  ```json
  {{example_deep_dives}}
  ```

  ---

  Generate a JSON object matching this TypeScript interface:
  ```typescript
  interface TechnologyDeepDive {
    title: string;           // "Why <Tech>?" format
    explanation: string;     // 2-3 sentence overview
    key_concepts?: Record<string, string | {
      description: string;
      code_example?: string;
      lang?: string;
    }>;
    real_world_scenario?: string;
    code_example?: string;   // Markdown fenced code block
    benefits: string[];
    best_practices?: string[];
    anti_patterns?: string[];
    learning_resources: string[];  // Markdown links
  }
  ```

  The key for this entry in the record should be: "{{technology_key}}"

  Return ONLY a JSON object like:
  ```json
  {
    "key": "technology_key",
    "value": { ... TechnologyDeepDive object ... }
  }
  ```

  No markdown fences or explanation.

validation:
  min_key_concepts: 3
  max_key_concepts: 5
  min_benefits: 4
  max_benefits: 6
  min_learning_resources: 3
  max_learning_resources: 4
  code_example_required: true
